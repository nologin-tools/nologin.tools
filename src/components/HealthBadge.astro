---
import { timeAgo } from '../lib/utils';
import type { EffectiveStatus } from '../lib/health';

interface Props {
  status: EffectiveStatus | null;
  lastCheckedAt: Date | null;
}

const { status, lastCheckedAt } = Astro.props;
---

{
  status === null ? (
    <span class="inline-flex items-center gap-1.5 text-xs text-neutral-400">
      <span class="w-2 h-2 rounded-full bg-neutral-300" />
      No checks yet
    </span>
  ) : status === 'online' ? (
    <span class="inline-flex items-center gap-1.5 text-xs text-green-600">
      <span class="w-2 h-2 rounded-full bg-green-500" />
      Online
      {lastCheckedAt && <span class="text-neutral-400">&middot; {timeAgo(lastCheckedAt)}</span>}
    </span>
  ) : status === 'unstable' ? (
    <span class="inline-flex items-center gap-1.5 text-xs text-amber-600">
      <span class="w-2 h-2 rounded-full bg-amber-500" />
      Unstable
      {lastCheckedAt && <span class="text-neutral-400">&middot; {timeAgo(lastCheckedAt)}</span>}
    </span>
  ) : (
    <span class="inline-flex items-center gap-1.5 text-xs text-red-500">
      <span class="w-2 h-2 rounded-full bg-red-500" />
      Offline
      {lastCheckedAt && <span class="text-neutral-400">&middot; {timeAgo(lastCheckedAt)}</span>}
    </span>
  )
}
